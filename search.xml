<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[CentOS7部署GateOne]]></title>
    <url>%2Flinux%2FCentOS7%E9%83%A8%E7%BD%B2GateOne%2F</url>
    <content type="text"><![CDATA[CentOS7部署GateOne Gate One is an HTML5-powered terminal emulator and SSH clientGateOne官网 https://github.com/liftoff/GateOne 1.下载1git clone https://github.com/liftoff/GateOne.git or 下载从github下载压缩包，解压缩1unzip GateOne-master.zip *#工具：yum install -y unzip zip* 2. 所需组件123sudo yum install gcc python-devel sudo pip install tornado==4.5.3sudo pip install html5lib 备注：gcc python-devel需要安装；注意回显log，缺少相关包会有错误提示 3. 安装备注：python2.7安装,python3安没成功没注意少什么组件12cd GateOne-masterpython setup.py install 4. 第一次启动默认启动只能本地访问，端口4431gateone 启动报错：这是用tornado 5.1.1时的报错，需要更换tornado 4.5.3[image:4A4953EA-B0B9-4BA1-9FA2-C13C8314DF53-2887-000021D611ABE18A/p73.png] 5. 修改配置gateone第一次运行后在/etc/gateone下产生配置文件,修改10server.conf12345678910111213141516171819202122232425262728293031323334353637383940414243444546cd /etc/gateone/conf.d vim 10server.conf// This is Gate One's main settings file.&#123; // "gateone" server-wide settings fall under "*" "*": &#123; "gateone": &#123; // These settings apply to all of Gate One "address": "", "ca_certs": null, "cache_dir": "/tmp/gateone_cache", "certificate": "/etc/gateone/ssl/certificate.pem", "cookie_secret": "NmJmNzQwODRjZjRlNGQ0NGI2NzMwMzZhZDM2NGE0YWYxO", "debug": false, "disable_ssl": true, #改为true，不用https "embedded": true, #改为true，允许嵌入到网站中 "enable_unix_socket": false, "gid": "0", "https_redirect": false, "js_init": "", "keyfile": "/etc/gateone/ssl/keyfile.pem", "locale": "en_US", "log_file_max_size": 100000000, "log_file_num_backups": 10, "log_file_prefix": "/var/log/gateone/gateone.log", "log_rotate_interval": 1, "log_rotate_mode": "size", "log_rotate_when": "midnight", "log_to_stderr": null, "logging": "info", "multiprocessing_workers": null, "origins": ["localhost", "127.0.0.1", "aliyun", "172.31.1.xxx","xxx.xxx.xxx.xxx"], #加入大网ip "pid_file": "/var/run/gateone.pid", "port": 8080, #端口号 "session_dir": "/tmp/gateone", "session_timeout": "5d", "syslog_facility": "daemon", "uid": "0", "unix_socket_mode": "0600", "unix_socket_path": "/tmp/gateone.sock", "url_prefix": "/", "user_dir": "/var/lib/gateone/users", "user_logs_max_age": "30d" &#125; &#125;&#125; 备注：gateone 1.2.0版本不再copy文件到/opt/gateone 6. 后台运行1service gateone start 7. 设置开启自启动123chmod +x /etc/rc.d/rc.localvim /etc/rc.d/rc.local添加 service gateone start]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS7部署Nginx]]></title>
    <url>%2Flinux%2FCentOS7%E9%83%A8%E7%BD%B2Nginx%2F</url>
    <content type="text"><![CDATA[1.安装依赖包123yum install openssl #安装openssl库yum install zlib #安装zlib库yum install pcre #安装pcre库 2.安装Nginx依赖项和Nginx12rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm yum install nginx 3.启动Nginx12service nginx start #启动Nginxservice nginx restart #重启Nginx 4.配置开机启动123chmod +x /etc/rc.d/rc.localvim /etc/rc.d/rc.local添加 service nginx start 5.配置config1234567891011121314151617181920212223242526272829303132333435363738394041424344454647vim /etc/nginx/conf.d/default.conf server &#123; listen 80; server_name 0.0.0.0; root /root/web/blog; #nginx的根目录默认/usr/share/nginx/html/下，修改访问目录 #charset koi8-r; #access_log /var/log/nginx/host.access.log main; location / &#123; root /root/web/blog; #修改访问目录 index index.html index.htm; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /root/web/blog; #修改访问目录 &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\.ht &#123; # deny all; #&#125;&#125;]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python脚本:处理日志文件]]></title>
    <url>%2Fpython%2Fpython-script-%E5%A4%84%E7%90%86%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[从操作日志中提取命令行信息123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118 # -*- coding: UTF-8 -*-'''解析操作日志，提取时间信息和命令行'''import osimport sysimport reimport timedef input_any_exit(): try: input("\r\nEnter any key to exit... ") finally: sys.exit(0)def check_file(): print("&gt;&gt;&gt;请将操作日志重命名为cmd.log放在当前目录下") while True: input("Enter any key to continue... ") file ="cmd.log" if os.path.isfile(file): return file else: print("&gt;&gt;&gt;Error: 当前目录下未找到%s文件!"%(file))def get_file(file): f =open(file,"r") log =f.read() log_list =log.split('StartTime') list = [] for cmd in log_list: #cmd = 'StartTime' + i re_list=[r'\r\n',r'\r',r'\n'] for r in re_list: cmd = re.sub(r,"",cmd) cmd = cmd + "\n" # 在结尾加换行符 #print(cmd) list.append(cmd) f.close() return listdef which_run(file): print("a:提取时间戳和命令行") print("b:提取命令行") num = input("which one(a/b):").lower() if num == 'a': run_time(get_file(file),file) elif num == 'b': run_cmd(get_file(file),file) else: which_run(file)def delete_login(list): while True: yes_or_no = input("是否清除'/--- * ----/'信息[y/n]:").lower() if yes_or_no == 'y': list_new=[] for i in list: if i.find("/---") == -1: list_new.append(i) return list_new elif yes_or_no == 'n': return listdef delete_show(list): while True: yes_or_no=input("是否清除show命令[y/n]:").lower() if yes_or_no == 'y': list_new=[] for i in list: if i.find("show") == -1: list_new.append(i) return list_new elif yes_or_no == 'n': return listdef run_cmd(list,file): print("&gt;&gt;&gt;提取命令行") list_new =delete_login(list) list_new =delete_show(list_new) time_now = time.strftime("%Y-%m-%d_%H-%M", time.localtime()) filename=file.split(".")[0]+"_cmd_&#123;&#125;.log".format(time_now) f = open(filename, "w") for i in list_new: cmd =i.split('CMDLine: ')[-1] f.write(cmd) f.close() print("&gt;&gt;&gt;执行完毕，输出%s"%(filename))def run_time(list,file): print("&gt;&gt;&gt;提取时间戳和命令行") list_new = delete_login(list) list_new = delete_show(list_new) time_now = time.strftime("%Y-%m-%d_%H-%M", time.localtime()) filename=file.split(".")[0]+"_time_&#123;&#125;.log".format(time_now) f = open(filename, "w") for i in list_new: mat = re.findall(r"(\d&#123;1,2&#125;:\d&#123;1,2&#125;:\d&#123;1,2&#125;\s\d&#123;1,2&#125;-\d&#123;1,2&#125;-\d&#123;4&#125;)", i) cmd1 =" ".join(mat) #cmd1 =i.split('FlowID:')[0] cmd2 =i.split('CMDLine: ')[-1] cmd =cmd1+" "+cmd2 f.write(cmd) f.close() print("&gt;&gt;&gt;执行完毕，输出%s"%(filename))if __name__ == '__main__': print("******** Welcome to use this tool! ********") try: which_run(check_file()) except (Exception) as e: print(e) finally: input_any_exit()]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python3安装]]></title>
    <url>%2Fpython%2Fpython3%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[Linux 查看版本： python --verison python3 --version ubuntu安装：使用deadsnakes，它让安装多个版本更容易 sudo add-apt-repository ppa:fkrull/deadsnakes sudo apt-get update sudo apt-get install python3.6 centos安装：yum不支持，需要下载源码安装 #安装依赖 yum -y groupinstall "Development tools" yum -y install zlib-devel openssl-devel #一个比较重要的包（不装的话，python3.7安装会报错） yum install libffi-devel -y #下载 wget https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tar.xz #解压安装 tar -xvJf Python-3.7.1.tar.xz cd Python-3.6.6 ./configure --prefix=/usr/local/bin/python3 sudo make sudo make install #创建软链接 sudo ln -s /usr/local/bin/python3/bin/python3 /usr/bin/python3 sudo ln -s /usr/local/bin/python3/bin/pip3 /usr/bin/pip3 OS X 查看版本： python --verison python3 --version 安装安装Homebrew,brew依赖于Xcode #一般都自带 xcode-select --install #安装homebrew /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" #检查homebrew brew doctor #安装python brew install python3 homebrew用法 搜索软件：brew search 软件名，如brew search wget 安装软件：brew install 软件名，如brew install wget 卸载软件：brew remove 软件名，如brew remove wget brew list 列出已安装的软件 brew update 更新brew brew home 用浏览器打开brew的官方网站 brew info 显示软件信息 brew deps 显示包依赖 brew -v brew -h Windows 检查版本： CMD下： python --version or 直接python尝试进入 安装： #官网下载，安装时选择Add Python to PATH http://python.org/downloads/]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
</search>
